<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr">

<head>
  <%- include('../partials/head'); %>
    <!-- BEGIN Three.js Load -->
    <!-- END Three.js Load -->
    <style>
      label.font-medium-2.text-bold-600 {
        margin-bottom: 0px !important;
      }
    </style>
</head>

<body class="vertical-layout vertical-menu 2-columns   menu-expanded fixed-navbar" data-open="click"
  data-menu="vertical-menu" data-color="bg-gradient-x-purple-blue" data-col="2-columns">
  <!-- fixed-top-->
  <%- include('../partials/header'); %>
    <!-- ////////////////////////////////////////////////////////////////////////////-->
    <%- include('../partials/sidebar'); %>

      <!-- dashboard -->
      <div class="app-content content">
        <div class="content-wrapper">
          <div class="content-wrapper-before"></div>
          <div class="content-header row">
            <div class="content-header-left col-md-4 col-12 mb-2">
              <h3 class="content-header-title">Owl Eye 3D Editor</h3>
            </div>
            <div class="content-header-right col-md-8 col-12">
              <div class="breadcrumbs-top float-md-right">
                <div class="breadcrumb-wrapper mr-1">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Home</a>
                    </li>
                    <li class="breadcrumb-item active">3D editer
                    </li>
                  </ol>
                </div>
              </div>
            </div>
          </div>

          <div class="content-body">
            <!-- Basic Buttons start -->
            <section id="basic-buttons">
              <div class="row">
                <div class="col-lg-12 col-md-12">
                  <div class="card" id="canvas-container">
                    <div class="card-header">
                      <% if(messages.pcl_name){ %>
                        <h4 class="card-title" id='modelpath'>
                          <%= messages.pcl_name %>
                            </h2>
                            <% }else{ %>
                              <h4 class="card-title" id='modelpath'>filename</h4>
                              <% } %>
                                <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                                <div class="heading-elements">
                                  <ul class="list-inline mb-0">
                                    <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                                    <li><a data-action="reload"><i class="ft-rotate-cw"></i></a></li>
                                    <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                                    <li><a data-action="close"><i class="ft-x"></i></a></li>
                                  </ul>
                                </div>
                    </div>
                    <div class="card-content collapse show">



                      <div class="card-body">
                        <ul class="nav nav-tabs">
                          <li class="nav-item">
                            <a class="nav-link active" id="baseIcon-tab4" data-toggle="tab" aria-controls="tabIcon4"
                              href="#tabIcon4" aria-expanded="true" data-nsfw-filter-status="swf"><i
                                class="ft-file-text mr-1"></i> File</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" id="baseIcon-tab1" data-toggle="tab" aria-controls="tabIcon1"
                              href="#tabIcon1" aria-expanded="false" data-nsfw-filter-status="swf"><i
                                class="ft-eye mr-1"></i> View</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" id="baseIcon-tab2" data-toggle="tab" aria-controls="tabIcon2"
                              href="#tabIcon2" aria-expanded="false" data-nsfw-filter-status="swf"><i
                                class="ft-navigation mr-1"></i> Selection</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" id="baseIcon-tab3" data-toggle="tab" aria-controls="tabIcon3"
                              href="#tabIcon3" aria-expanded="false" data-nsfw-filter-status="swf"><i
                                class="ft-scissors mr-1"></i> Tools</a>
                          </li>
                          <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button"
                              aria-haspopup="true" aria-expanded="false" data-nsfw-filter-status="swf">
                              <i class="ft-filter mr-1"></i> Filters
                            </a>
                            <div class="dropdown-menu" x-placement="bottom-start"
                              style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(0px, 47px, 0px);">
                              <a class="dropdown-item" id="dropdownIcon1-tab" href="#dropdownIcon1" data-toggle="tab"
                                aria-controls="dropdownIcon1" aria-expanded="true"
                                data-nsfw-filter-status="swf">GridMinimumFilter</a>
                              <a class="dropdown-item" id="dropdownIcon2-tab" href="#dropdownIcon2" data-toggle="tab"
                                aria-controls="dropdownIcon2" aria-expanded="true"
                                data-nsfw-filter-status="swf">VoxelGridFilter</a>
                              <a class="dropdown-item" id="dropdownIcon3-tab" href="#dropdownIcon3" data-toggle="tab"
                                aria-controls="dropdownIcon3" aria-expanded="true"
                                data-nsfw-filter-status="swf">StatisticalOutlierRemovalFilter</a>
                              <a class="dropdown-item" id="dropdownIcon4-tab" href="#dropdownIcon4" data-toggle="tab"
                                aria-controls="dropdownIcon4" aria-expanded="true"
                                data-nsfw-filter-status="swf">PassThroughFilter</a>
                            </div>
                          </li>
                          <!-- <li class="nav-item"><input type="text" class="form-control round btn-glow mb-1 mr-1"
                              id="count" style="height: 31px;padding-left: 15px;width: 81px;" min="0.1" max="10"
                              step="0.1" value="0.5"></li> -->
                          <!-- <li class="nav-item">
                            <a class="nav-link disabled" data-nsfw-filter-status="swf"><i class="ft-gitlab"></i> Disabled</a>
                          </li> -->
                        </ul>
                        <div class="tab-content px-1 pt-1">
                          <div role="tabpanel" class="tab-pane" id="tabIcon1" aria-labelledby="baseIcon-tab1">
                            <div class="row toolbar">
                              <!-- <p data-nsfw-filter-status="swf">Oat cake marzipan cake lollipop caramels wafer pie jelly beans. Icing halvah chocolate cake carrot cake. Jelly beans carrot cake marshmallow gingerbread chocolate cake. Gummies cupcake croissant.</p> -->

                              <input type="color" value="#87CEEB" style="height: 31px;width:60px;"
                                class="btn btn-icon btn-outline-success btn-glow round btn-sm mr-1 mb-1"
                                id="pointcolor">
                              <input type="color" value="#800080" style="height: 31px;width:60px;"
                                class="btn btn-icon btn-outline-success btn-glow round btn-sm mr-1 mb-1"
                                id="delaunycolor">
                              <div id="delaunyDiv" class="form-group pb-0 mb-1"
                                style="padding-top: 3px; padding-left:10px; margin-bottom:0px;">
                                <input type="checkbox" data-size="sm" id="delauny" class="switchery"
                                  data-color="success" data-secondary-color="success" data-switchery="true"
                                  style="display: none;">
                                <label for="delauny" class="font-medium-2 text-bold-600">delauny(2D)</label>
                              </div>
                              <div id="delaunyDiv3" class="form-group pb-0 mb-1"
                                style="padding-top: 3px; padding-left:10px; margin-bottom:0px;">
                                <input type="checkbox" data-size="sm" id="delauny3" class="switchery"
                                  data-color="success" data-secondary-color="success" data-switchery="true"
                                  style="display: none;">
                                <label for="delauny3" class="font-medium-2 text-bold-600">delauny(3D)</label>
                              </div>
                              <div id="surfaceDiv" class="form-group pb-0 mb-1"
                                style="padding-top: 3px; padding-left:10px; margin-bottom:0px;">
                                <input type="checkbox" data-size="sm" id="surface" class="switchery"
                                  data-color="success" data-secondary-color="success" data-switchery="true"
                                  style="display: none;">
                                <label for="surface" class="font-medium-2 text-bold-600">surface</label>
                              </div>
                              <div id="heightmapColorDiv" class="form-group pb-0 mb-1"
                                style="padding-top: 3px; padding-left:10px; margin-bottom:0px; flex-grow:20;">
                                <input type="checkbox" data-size="sm" id="heightmapColor" checked class="switchery"
                                  data-color="success" data-secondary-color="success" data-switchery="true"
                                  style="display: none;">
                                <label for="heightmapColor" class="font-medium-2 text-bold-600">heightmap</label>
                              </div>
                            </div>
                          </div>
                          <div class="tab-pane" id="tabIcon2" aria-labelledby="baseIcon-tab2">
                            <div class="row toolbar">
                              <input type="color" value="#87CEEB" style="height: 31px;width:60px;"
                                class="btn btn-icon btn-outline-primary btn-glow round btn-sm mr-1 mb-1"
                                id="polygoncolor">
                              <input type="color" value="#87CEEB" style="height: 31px;width:60px;"
                                class="btn btn-icon btn-outline-primary btn-glow round btn-sm mr-1 mb-1"
                                id="selectedcolor">
                              <div id="selectedsize" class="form-group pb-0 mb-1"
                                style="height: 31px;width: 60px; padding-left:10px;padding-top: 7px; margin-bottom:0px;">
                                <input type="range" class="mr-1 " id="vol" name="vol" min="0.1" max="1" step="0.1"
                                  value="0.2">
                              </div>
                            </div>
                          </div>
                          <div class="tab-pane" id="tabIcon3" aria-labelledby="baseIcon-tab3">
                            <div class="row toolbar">
                              <button type='button'
                                class="btn btn-icon btn-outline-success btn-glow round active btn-sm mr-1 mb-1"
                                title='Open model from local pc' id='btn-move'>
                                <i class="ft-move"></i>
                              </button>
                              <button type='button'
                                class="btn btn-icon btn-outline-success btn-glow round btn-sm mr-1 mb-1"
                                title='Open model from local pc' id='btn-point'>
                                <i class="ft-edit-2"></i>
                              </button>
                              <button type='button'
                                class="btn btn-icon btn-outline-success btn-glow round btn-sm mr-1 mb-1"
                                title='Open model from local pc' id='btn-polygon'>
                                <i class="ft-octagon"></i>
                              </button>
                              <button type='button'
                                class="btn btn-icon btn-outline-success btn-glow round btn-sm mr-1 mb-1"
                                title='Open model from local pc' id='btn-pencil'>
                                <i class="ft-edit-3"></i>
                              </button>
                            </div>
                          </div>
                          <div class="tab-pane active" id="tabIcon4" aria-expanded="true"
                            aria-labelledby="baseIcon-tab4">
                            <div class="row toolbar">
                              <input name="mymodel" type="file" style="display: none;" accept=".obj, .txt"
                                id="input_model">
                              <button type='button'
                                class="btn btn-icon btn-outline-primary btn-glow round btn-sm mr-1 mb-1"
                                title='Open model from local pc' id='btn-openfromLocal'>
                                <i class="ft-upload"></i>
                              </button>
                              <button type='button' style="float:right;"
                                class="btn btn-icon btn-outline-primary btn-glow round btn-sm mr-1 mb-1"
                                title='Open model from local pc' id='btn-save'>
                                <i class="ft-save"></i>
                              </button>
                              <button type='button' style="float:right;"
                                class="btn btn-icon btn-outline-primary btn-glow round btn-sm mb-1"
                                title='Open model from local pc' id='btn-download' data-toggle="modal"
                                data-target="#exampleModal">
                                <i class="ft-download"></i>
                              </button>
                              <% if(messages.pointcloud){ %>
                                <input type="hidden" id="pointcloud" value='<%- messages.pointcloud %>'>
                                <% } %>

                            </div>
                          </div>
                          <div class="tab-pane" id="dropdownIcon1" role="tabpanel" aria-labelledby="dropdownIcon1-tab"
                            aria-expanded="false">
                            <div class="row toolbar">
                              <div class="badge badge-pill badge-primary mb-1 mr-1" style="">Grid Minimum
                                Filter
                              </div>
                              <input type="number" class="form-control round btn-glow mb-1 mr-1" id="f1-cell-size"
                                style="height: 31px;padding-left: 15px;width: 81px;" min="0.1" max="10" step="0.1"
                                value="0.5">
                              <button type='button' style="float:right;"
                                class="btn btn-icon btn-outline-primary btn-glow round btn-sm mb-1"
                                title='Open model from local pc' id='f1-filter'>
                                filtering
                              </button>
                            </div>
                          </div>
                          <div class="tab-pane" id="dropdownIcon2" role="tabpanel" aria-labelledby="dropdownIcon2-tab"
                            aria-expanded="false">
                            <div class="row toolbar">
                              <div class="badge badge-pill badge-primary mb-1 mr-1" style="">Voxel Grid
                                Filter
                              </div>
                              <input type="number" class="form-control round btn-glow mb-1 mr-1" id="f2-cell-size"
                                style="height: 31px;padding-left: 15px;width: 81px;" min="0.1" max="10" step="0.1"
                                value="0.5">
                              <button type='button' style="float:right;"
                                class="btn btn-icon btn-outline-primary btn-glow round btn-sm mb-1"
                                title='Open model from local pc' id='f2-filter'>
                                filtering
                              </button>
                            </div>
                          </div>
                          <div class="tab-pane" id="dropdownIcon3" role="tabpanel" aria-labelledby="dropdownIcon3-tab"
                            aria-expanded="false">
                            <div class="row toolbar">
                              <div class="badge badge-pill badge-primary mb-1 mr-1" style="">Statistical
                                Outlier Removal
                                Filter
                              </div>
                              <input type="number" class="form-control round btn-glow mb-1 mr-1" id="f3-number"
                                style="height: 31px;padding-left: 15px;width: 81px;" min="1" max="100" step="1"
                                value="30">
                              <input type="number" class="form-control round btn-glow mb-1 mr-1" id="f3-deviation"
                                style="height: 31px;padding-left: 15px;width: 81px;" min="0.1" max="10" step="0.1"
                                value="0.5">
                              <button type='button' style="float:right;"
                                class="btn btn-icon btn-outline-primary btn-glow round btn-sm mb-1"
                                title='Open model from local pc' id='f3-filter'>
                                filtering
                              </button>
                            </div>
                          </div>
                          <div class="tab-pane" id="dropdownIcon4" role="tabpanel" aria-labelledby="dropdownIcon4-tab"
                            aria-expanded="false">
                            <div class="row toolbar">
                              <div class="badge badge-pill badge-primary mb-1 mr-1" style="">Pass Through
                                Filter
                              </div>
                              <select class="form-control round btn-glow mb-1 mr-1" style="height: 31px;padding-left: 15px;
                                width: 60px;padding-right: 0;" id="f4-pass">
                                <option value="x">X</option>
                                <option value="y">Y</option>
                                <option value="z">Z</option>
                              </select>
                              <input type="number" class="form-control round btn-glow mb-1 mr-1" id="f4-limit1"
                                style="height: 31px;padding-left: 15px;width: 81px;" min="0" max="10000" step="1"
                                value="0">
                              <input type="number" class="form-control round btn-glow mb-1 mr-1" id="f4-limit2"
                                style="height: 31px;padding-left: 15px;width: 81px;" min="1" max="10000" step="1"
                                value="500">
                              <button type='button' style="float:right;"
                                class="btn btn-icon btn-outline-primary btn-glow round btn-sm mb-1"
                                title='Open model from local pc' id='f4-filter'>
                                filtering
                              </button>

                            </div>
                          </div>
                        </div>
                        <!-- </div>



                        <div class="card-body"> -->
                        <!-- <p class="card-subtitle">You can load *.txt, *.obj files from owl windows app.</p> -->
                        <div class="form-group">



                          <!-- basic viewer -->
                          <%- include('../partials/threeediter'); %>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>
            <!-- Basic Buttons end -->
          </div>


        </div>
      </div>
      <!-- ////////////////////////////////////////////////////////////////////////////-->

      <!-- page content end -->
      <%- include('../partials/footer'); %>
        <script type="module" src="/js/edit_three.js"></script>
        <script type="module" src="/js/tool_three.js"></script>
        <!-- <script>
          window.onbeforeunload = function () {
            return 'Are you really want to perform the action?';
          }
        </script> -->

        <!-- page footer -->
        <div class="modal fade text-left" id="exampleModal" tabindex="-1" role="dialog"
          aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document" style="margin: 18.75rem auto;">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Please choose download file type</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">×</span>
                </button>
              </div>
              <div class="modal-body">
                <div class="row toolbar" style="justify-content: center;">
                  <button type="button" class="btn btn-success mr-1 ml-1" id="obj-download" data-dismiss="modal"><i
                      class="ft-download"></i>
                    Download to obj
                    file</button>
                  <button type="button" class="btn btn-primary mr-1 ml-1" id="txt-download" data-dismiss="modal"><i
                      class=" ft-download"></i>
                    Download to txt
                    file</button>
                </div>
              </div>
              <div class="modal-footer">
              </div>
            </div>
          </div>
        </div>
</body>

</html>